(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{D4pJ:function(n,l,t){"use strict";t.r(l);var e=t("CcnG"),i=t("mrSG"),o=t("ZZ/e"),u=t("Pn9U"),r=t("uRF+"),c=t("gRf5"),s=t("DJEK"),a=t("Yttj"),b=t("Z4OH"),p=t("OrKy"),h=t("UHPm"),g=t("PODB"),d=function(){function n(n,l,t,e,i,o,u,r,c,s,a,b,p){this.activatedRoute=n,this.actionSheetController=l,this.camera=t,this.router=e,this.fileChooser=i,this.fileTransfer=o,this.mediaCapture=u,this.webView=r,this.streamingMedia=c,this.events=s,this.configService=a,this.globalService=b,this.httpUtils=p,this.item=0,this.imgArr=[],this.imgArr2=[],this.filesArr=[],this.isShow=!0,this.hostUrl="http://192.168.0.55:1012/bjsoilapi/file/download.vm?",this.skinName=localStorage.getItem("skinName")||"blue"}return n.prototype.publishEvents=function(){this.events.publish("user:created",this.imgArr2),this.router.navigate(["inspection-record"])},n.prototype.ngOnInit=function(){var n=this;this.imgWidth=window.innerWidth/3+"px",this.configService.getFile({sessionId:this.globalService.sessionId,ids:this.globalService.filesID},!0,function(l){if("error"!==l)for(var t=0,e=l;t<e.length;t++){var i=e[t];-1!==i.FILETYPE.indexOf("image")?n.imgArr.push(n.hostUrl+"sessionId="+n.globalService.sessionId+"&fileid="+i.FILEID):-1!==i.FILETYPE.indexOf("mp4")||-1!==i.FILETYPE.indexOf("video")?n.video=n.hostUrl+"sessionId="+n.globalService.sessionId+"&fileid="+i.FILEID:n.filesArr.push(i.FILENAME)}})},n.prototype.ionViewWillEnter=function(){this.skinName=localStorage.getItem("skinName")||"blue"},n.prototype.OnitemClick=function(n){this.item=n},n.prototype.addCamera=function(){this.presentCamera()},n.prototype.addVideo=function(){this.presentVideo()},n.prototype.addFiles=function(){this.presentFiles()},n.prototype.presentCamera=function(){return i.b(this,void 0,void 0,function(){var n=this;return i.e(this,function(l){switch(l.label){case 0:return[4,this.actionSheetController.create({buttons:[{text:"\u62cd\u6444\u7167\u7247",role:"destructive",handler:function(){n.openCamera("CAMERA")}},{text:"\u9009\u62e9\u7167\u7247",handler:function(){n.openCamera("PHOTOLIBRARY")}},{text:"\u53d6\u6d88",role:"cancel",handler:function(){}}]})];case 1:return[4,l.sent().present()];case 2:return l.sent(),[2]}})})},n.prototype.presentVideo=function(){return i.b(this,void 0,void 0,function(){var n=this;return i.e(this,function(l){switch(l.label){case 0:return[4,this.actionSheetController.create({buttons:[{text:"\u89c6\u9891\u62cd\u6444",role:"destructive",handler:function(){n.openVideo()}},{text:"\u53d6\u6d88",role:"cancel",handler:function(){}}]})];case 1:return[4,l.sent().present()];case 2:return l.sent(),[2]}})})},n.prototype.presentFiles=function(){return i.b(this,void 0,void 0,function(){var n=this;return i.e(this,function(l){switch(l.label){case 0:return[4,this.actionSheetController.create({buttons:[{text:"\u5728\u624b\u673a\u6587\u4ef6\u4e2d\u9009\u62e9",role:"destructive",handler:function(){n.chooseFile()}},{text:"\u53d6\u6d88",role:"cancel",handler:function(){}}]})];case 1:return[4,l.sent().present()];case 2:return l.sent(),[2]}})})},n.prototype.openCamera=function(n){var l=this;this.camera.getPicture({quality:50,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,saveToPhotoAlbum:!1,sourceType:this.camera.PictureSourceType[n]}).then(function(n){var t=l.webView.convertFileSrc(n);l.imgPath=t,l.imgArr.unshift(t),l.imgArr2.push(n)},function(n){})},n.prototype.openVideo=function(){var n=this;this.mediaCapture.captureVideo({limit:1,quality:60,duration:60}).then(function(l){n.videoUrl=l[0].fullPath,n.video=n.webView.convertFileSrc(l[0].fullPath),n.imgArr2.push(l[0].fullPath),n.isShow=!1},function(n){console.log("Something went wrong")})},n.prototype.chooseFile=function(){var n=this;this.fileChooser.open().then(function(l){n.imgArr2.push(l);var t=n.getFileName(l);n.filesArr.unshift(t)}).catch(function(n){return console.log(n)})},n.prototype.goEdit=function(n){this.router.navigate(["edit-photo"],{queryParams:{imgPath:n}})},n.prototype.getFileName=function(n){return n.substring(n.lastIndexOf("/")+1,n.length).toLowerCase()},n.prototype.playVideo=function(){var n=this;this.streamingMedia.playVideo("http://v.qq.com/x/page/r0506bwgizi.html",{successCallback:function(){n.httpUtils.thsToast("Video played")},errorCallback:function(l){n.httpUtils.thsToast(l)},orientation:"portrait",shouldAutoClose:!0,controls:!0})},n}(),m=function(){return function(){}}(),f=t("pMnS"),v=t("Ip0R"),k=t("oBZk"),C=t("gIcY"),x=t("ZYCi"),_=e.ob({encapsulation:0,styles:[[".top_head[_ngcontent-%COMP%]{padding-top:9px;padding-bottom:10px;height:56px!important;border-top:.55px solid #fff}#top_tab[_ngcontent-%COMP%]{--color:white;--indicator-color:none;--indicator-color-checked:none;margin:4px auto 0;width:90%;height:30px;font-size:16px!important}.active[_ngcontent-%COMP%]{background-color:#fff}.top_tab_item[_ngcontent-%COMP%]{min-height:34px}.top_head.blue[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{color:#20a4ec}.top_head.green[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .top_tab_item[_ngcontent-%COMP%]{color:#00c393}.top_head.green[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#00c393}.top_head.orange[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:orange}ion-segment-button[_ngcontent-%COMP%]{border:.55px solid #fff}ion-segment-button[_ngcontent-%COMP%]:first-child{border-right:none;border-top-left-radius:5px;border-bottom-left-radius:5px}ion-segment-button[_ngcontent-%COMP%]:last-child{border-left:none;border-top-right-radius:5px;border-bottom-right-radius:5px}.media-box[_ngcontent-%COMP%]{padding:10px}.imgBox[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.imgBox[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px}.video[_ngcontent-%COMP%]{width:100%;height:300px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{color:#fff;--min-height:56px}ion-header[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%]{--color:#fff!important}ion-header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{color:#fff;font-size:14px}ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-weight:400}.size[_ngcontent-%COMP%]{font-size:14px}"]],data:{}});function P(n){return e.Ib(0,[(n()(),e.qb(0,0,null,null,2,"img",[],[[8,"src",4]],[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.goEdit(n.context.$implicit)&&e),e},null,null)),e.pb(1,278528,null,0,v.n,[e.t,e.k,e.E],{ngStyle:[0,"ngStyle"]},null),e.Bb(2,{width:0,height:1})],function(n,l){var t=l.component,e=n(l,2,0,t.imgWidth,t.imgWidth);n(l,1,0,e)},function(n,l){n(l,0,0,l.context.$implicit)})}function O(n){return e.Ib(0,[(n()(),e.qb(0,0,null,null,0,"video",[["class","video"],["controls","controls"],["type","video/mp4"]],[[8,"src",4]],null,null,null,null))],null,function(n,l){n(l,0,0,l.component.video)})}function y(n){return e.Ib(0,[(n()(),e.qb(0,0,null,null,2,"img",[["src","../../../assets/img/tj.png"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.addVideo()&&e),e},null,null)),e.pb(1,278528,null,0,v.n,[e.t,e.k,e.E],{ngStyle:[0,"ngStyle"]},null),e.Bb(2,{width:0,height:1})],function(n,l){var t=l.component,e=n(l,2,0,t.imgWidth,t.imgWidth);n(l,1,0,e)},null)}function M(n){return e.Ib(0,[(n()(),e.qb(0,0,null,null,4,"ion-item",[],null,null,null,k.kb,k.s)),e.pb(1,49152,null,0,o.J,[e.h,e.k],null,null),(n()(),e.qb(2,0,null,0,2,"ion-label",[],null,null,null,k.lb,k.w)),e.pb(3,49152,null,0,o.P,[e.h,e.k],null,null),(n()(),e.Gb(4,0,[" "," "]))],null,function(n,l){n(l,4,0,l.context.$implicit)})}function w(n){return e.Ib(0,[(n()(),e.qb(0,0,null,null,3,"ion-list",[],null,null,null,k.mb,k.x)),e.pb(1,49152,null,0,o.Q,[e.h,e.k],null,null),(n()(),e.hb(16777216,null,0,1,null,M)),e.pb(3,278528,null,0,v.j,[e.P,e.M,e.s],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,3,0,l.component.filesArr)},null)}function I(n){return e.Ib(0,[(n()(),e.qb(0,0,null,null,18,"ion-header",[["mode","ios"]],null,null,null,k.cb,k.n)),e.pb(1,49152,null,0,o.D,[e.h,e.k],{mode:[0,"mode"]},null),(n()(),e.qb(2,0,null,0,16,"ion-toolbar",[["mode","ios"]],null,null,null,k.Cb,k.N)),e.pb(3,278528,null,0,v.i,[e.s,e.t,e.k,e.E],{ngClass:[0,"ngClass"]},null),e.Bb(4,{blue:0,green:1,orange:2}),e.pb(5,49152,null,0,o.Db,[e.h,e.k],{mode:[0,"mode"]},null),(n()(),e.qb(6,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,k.S,k.d)),e.pb(7,49152,null,0,o.n,[e.h,e.k],null,null),(n()(),e.qb(8,0,null,0,2,"ion-back-button",[["icon","ios-arrow-back"],["mode","ios"],["text",""]],null,[[null,"click"]],function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.zb(n,10).onClick(t)&&i),i},k.Q,k.b)),e.pb(9,49152,null,0,o.i,[e.h,e.k],{mode:[0,"mode"],icon:[1,"icon"],text:[2,"text"]},null),e.pb(10,16384,null,0,o.j,[[2,o.jb],o.Jb],null,null),(n()(),e.qb(11,0,null,0,2,"ion-title",[],null,null,null,k.Ab,k.L)),e.pb(12,49152,null,0,o.Bb,[e.h,e.k],null,null),(n()(),e.Gb(-1,0,["\u6dfb\u52a0\u9644\u4ef6"])),(n()(),e.qb(14,0,null,0,4,"ion-buttons",[["slot","primary"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.publishEvents()&&e),e},k.S,k.d)),e.pb(15,49152,null,0,o.n,[e.h,e.k],null,null),(n()(),e.qb(16,0,null,0,2,"ion-button",[["class","size"]],null,null,null,k.R,k.c)),e.pb(17,49152,null,0,o.m,[e.h,e.k],null,null),(n()(),e.Gb(-1,0,[" \u4fdd\u5b58 "])),(n()(),e.qb(19,0,null,null,41,"ion-content",[],null,null,null,k.Z,k.k)),e.pb(20,49152,null,0,o.w,[e.h,e.k],null,null),(n()(),e.qb(21,0,null,0,21,"div",[["class","top_head"]],null,null,null,null,null)),e.pb(22,278528,null,0,v.i,[e.s,e.t,e.k,e.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Bb(23,{blue:0,green:1,orange:2}),(n()(),e.qb(24,0,null,null,18,"ion-segment",[["id","top_tab"]],null,[[null,"ionBlur"],[null,"ionChange"]],function(n,l,t){var i=!0;return"ionBlur"===l&&(i=!1!==e.zb(n,27)._handleBlurEvent()&&i),"ionChange"===l&&(i=!1!==e.zb(n,27)._handleChangeEvent(t.target.value)&&i),i},k.ub,k.E)),e.Db(5120,null,C.g,function(n){return[n]},[o.Ob]),e.pb(26,49152,null,0,o.mb,[e.h,e.k],null,null),e.pb(27,16384,null,0,o.Ob,[e.k],null,null),(n()(),e.qb(28,0,null,0,4,"ion-segment-button",[["checked","true"],["class","top_tab_item"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.OnitemClick(0)&&e),e},k.tb,k.F)),e.pb(29,278528,null,0,v.i,[e.s,e.t,e.k,e.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Bb(30,{active:0}),e.pb(31,49152,null,0,o.nb,[e.h,e.k],{checked:[0,"checked"]},null),(n()(),e.Gb(-1,0,[" \u7167\u7247 "])),(n()(),e.qb(33,0,null,0,4,"ion-segment-button",[["class","top_tab_item"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.OnitemClick(1)&&e),e},k.tb,k.F)),e.pb(34,278528,null,0,v.i,[e.s,e.t,e.k,e.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Bb(35,{active:0}),e.pb(36,49152,null,0,o.nb,[e.h,e.k],null,null),(n()(),e.Gb(-1,0,[" \u89c6\u9891 "])),(n()(),e.qb(38,0,null,0,4,"ion-segment-button",[["class","top_tab_item"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.OnitemClick(2)&&e),e},k.tb,k.F)),e.pb(39,278528,null,0,v.i,[e.s,e.t,e.k,e.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Bb(40,{active:0}),e.pb(41,49152,null,0,o.nb,[e.h,e.k],null,null),(n()(),e.Gb(-1,0,[" \u6587\u4ef6 "])),(n()(),e.qb(43,0,null,0,6,"div",[["class","media-box"]],[[4,"display",null]],null,null,null,null)),(n()(),e.qb(44,0,null,null,5,"div",[["class","imgBox"]],null,null,null,null,null)),(n()(),e.hb(16777216,null,null,1,null,P)),e.pb(46,278528,null,0,v.j,[e.P,e.M,e.s],{ngForOf:[0,"ngForOf"]},null),(n()(),e.qb(47,0,null,null,2,"img",[["src","../../../assets/img/tj.png"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.addCamera()&&e),e},null,null)),e.pb(48,278528,null,0,v.n,[e.t,e.k,e.E],{ngStyle:[0,"ngStyle"]},null),e.Bb(49,{width:0,height:1}),(n()(),e.qb(50,0,null,0,4,"div",[["class","media-box"]],[[4,"display",null]],null,null,null,null)),(n()(),e.hb(16777216,null,null,1,null,O)),e.pb(52,16384,null,0,v.k,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.hb(16777216,null,null,1,null,y)),e.pb(54,16384,null,0,v.k,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.qb(55,0,null,0,5,"div",[["class","media-box"]],[[4,"display",null]],null,null,null,null)),(n()(),e.hb(16777216,null,null,1,null,w)),e.pb(57,16384,null,0,v.k,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.qb(58,0,null,null,2,"img",[["src","../../../assets/img/tj.png"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.addFiles()&&e),e},null,null)),e.pb(59,278528,null,0,v.n,[e.t,e.k,e.E],{ngStyle:[0,"ngStyle"]},null),e.Bb(60,{width:0,height:1})],function(n,l){var t=l.component;n(l,1,0,"ios");var e=n(l,4,0,"blue"===t.skinName,"green"===t.skinName,"orange"===t.skinName);n(l,3,0,e),n(l,5,0,"ios"),n(l,9,0,"ios","ios-arrow-back","");var i=n(l,23,0,"blue"===t.skinName,"green"===t.skinName,"orange"===t.skinName);n(l,22,0,"top_head",i);var o=n(l,30,0,0==t.item);n(l,29,0,"top_tab_item",o),n(l,31,0,"true");var u=n(l,35,0,1==t.item);n(l,34,0,"top_tab_item",u);var r=n(l,40,0,2==t.item);n(l,39,0,"top_tab_item",r),n(l,46,0,t.imgArr);var c=n(l,49,0,t.imgWidth,t.imgWidth);n(l,48,0,c),n(l,52,0,t.video),n(l,54,0,t.isShow),n(l,57,0,t.filesArr.length>0);var s=n(l,60,0,t.imgWidth,t.imgWidth);n(l,59,0,s)},function(n,l){var t=l.component;n(l,43,0,0==t.item?"block":"none"),n(l,50,0,1==t.item?"block":"none"),n(l,55,0,2==t.item?"block":"none")})}function E(n){return e.Ib(0,[(n()(),e.qb(0,0,null,null,1,"app-edit-img",[],null,null,null,I,_)),e.pb(1,114688,null,0,d,[x.a,o.a,u.a,x.m,r.a,c.a,s.a,a.a,b.a,o.f,p.a,h.a,g.a],null,null)],function(n,l){n(l,1,0)},null)}var q=e.mb("app-edit-img",d,E,{},{},[]);t.d(l,"EditImgPageModuleNgFactory",function(){return S});var S=e.nb(m,[],function(n){return e.wb([e.xb(512,e.j,e.cb,[[8,[f.a,q]],[3,e.j],e.x]),e.xb(4608,v.m,v.l,[e.u,[2,v.t]]),e.xb(4608,C.o,C.o,[]),e.xb(4608,o.c,o.c,[e.z,e.g]),e.xb(4608,o.Ib,o.Ib,[o.c,e.j,e.q,v.c]),e.xb(4608,o.Mb,o.Mb,[o.c,e.j,e.q,v.c]),e.xb(1073742336,v.b,v.b,[]),e.xb(1073742336,C.m,C.m,[]),e.xb(1073742336,C.d,C.d,[]),e.xb(1073742336,o.Fb,o.Fb,[]),e.xb(1073742336,x.n,x.n,[[2,x.t],[2,x.m]]),e.xb(1073742336,m,m,[]),e.xb(1024,x.k,function(){return[[{path:"",component:d}]]},[])])})}}]);