{"version":3,"sources":["webpack:///./src/app/pages/plot-primary-research/plot-primary-research.module.ts","webpack:///./src/app/pages/plot-primary-research/plot-primary-research.page.html","webpack:///./src/app/pages/plot-primary-research/plot-primary-research.page.scss","webpack:///./src/app/pages/plot-primary-research/plot-primary-research.page.ts"],"names":[],"mappings":"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","file":"pages-plot-primary-research-plot-primary-research-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PlotPrimaryResearchPage } from './plot-primary-research.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PlotPrimaryResearchPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [PlotPrimaryResearchPage]\n})\nexport class PlotPrimaryResearchPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar [ngClass]=\\\"{'blue': skinName==='blue','green': skinName==='green','orange': skinName==='orange'}\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button text=\\\"\\\" icon=\\\"ios-arrow-back\\\" mode='ios'></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>初步调查</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <!-- 下拉刷新组件 -->\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\" >\\n    <ion-refresher-content pullingIcon=\\\"ios-arrow-down\\\" refreshingSpinner=\\\"lines\\\" mode='ios'>\\n    </ion-refresher-content>\\n  </ion-refresher>\\n\\n  <ion-grid  class=\\\"detail_table\\\" *ngIf=\\\"dataFlag\\\">\\n    <ion-row justify-content-around>\\n      <ion-col class=\\\"left-text\\\">初步调查标题：</ion-col>\\n      <ion-col class=\\\"right-text\\\" style=\\\" line-height: 22px;\\\">{{firstCensusInfo.CENSUS_TITLE||\\\"- -\\\"}}</ion-col>\\n    </ion-row>\\n    <ion-row justify-content-around>\\n      <ion-col class=\\\"left-text\\\">初步调查报告编制单位：</ion-col>\\n      <ion-col class=\\\"right-text\\\">{{firstCensusInfo.CENSUS_UNIT||\\\"- -\\\"}}</ion-col>\\n    </ion-row>\\n    <ion-row justify-content-around>\\n      <ion-col class=\\\"left-text\\\">初步调查完成时间：</ion-col>\\n      <ion-col class=\\\"right-text\\\">{{firstCensusInfo.CENSUS_END_TIME===null?\\\"- -\\\":firstCensusInfo.CENSUS_END_TIME| date:'yyyy-MM-dd'}}</ion-col>\\n    </ion-row>\\n    <ion-row justify-content-around>\\n      <ion-col class=\\\"left-text\\\">初步调查报告附件：</ion-col>\\n      <ion-col class=\\\"right-text\\\" >\\n        <ion-list *ngIf=\\\"censusFileArr.length>0\\\">\\n          <ion-item *ngFor=\\\"let item of censusFileArr\\\" lines=\\\"none\\\" slot=\\\"end\\\">\\n            <p class=\\\"down-line\\\" size=\\\"small\\\" color=\\\"tertiary\\\" (click)=\\\"downFile(item)\\\"> {{item.FILENAME}}</p>\\n          </ion-item>\\n        </ion-list>\\n        <p class=\\\"nofile\\\" *ngIf=\\\"censusFileArr.length==0\\\">暂无附件</p>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row justify-content-around>\\n      <ion-col class=\\\"left-text\\\">检测报告附件：</ion-col>\\n      <ion-col class=\\\"right-text\\\" >\\n        <ion-list *ngIf=\\\"surveyFileArr.length>0\\\">\\n          <ion-item *ngFor=\\\"let item of surveyFileArr\\\" lines=\\\"none\\\" slot=\\\"end\\\">\\n            <p class=\\\"down-line\\\" size=\\\"small\\\" color=\\\"tertiary\\\" (click)=\\\"downFile(item)\\\"> {{item.FILENAME}}</p>\\n          </ion-item>\\n        </ion-list>\\n        <p class=\\\"nofile\\\" *ngIf=\\\"surveyFileArr.length==0\\\">暂无附件</p>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row justify-content-around>\\n      <ion-col class=\\\"left-text\\\">是否为污染地块：</ion-col>\\n      <ion-col class=\\\"right-text\\\">{{firstCensusInfo.ISPOLLUTELAND===1?\\\"污染\\\":\\\"否\\\"}}；<span *ngIf=\\\"evidenceFileArr.length>0\\\">证明材料：</span>\\n        <ion-list *ngIf=\\\"evidenceFileArr.length>0\\\" style=\\\"line-height:22px;\\\">\\n          <ion-item *ngFor=\\\"let item of evidenceFileArr\\\" lines=\\\"none\\\" slot=\\\"end\\\">\\n            <p class=\\\"down-line\\\" size=\\\"small\\\" color=\\\"tertiary\\\" (click)=\\\"downFile(item)\\\"> {{item.FILENAME}}</p>\\n          </ion-item>\\n        </ion-list>\\n        <p class=\\\"nofile\\\" *ngIf=\\\"evidenceFileArr.length==0\\\"  >暂无附件</p>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row justify-content-around>\\n      <ion-col class=\\\"left-text\\\">公示网址：</ion-col>\\n      <ion-col class=\\\"right-text\\\" >\\n        <div *ngIf=\\\"firstCensusInfo.CENSUS_PUBLIC_TYPE===1\\\">新增项目:\\n          <p class=\\\"down-line\\\" (click)=\\\"openBrower(firstCensusInfo.CENSUS_PUBLIC_URL)\\\">{{firstCensusInfo.CENSUS_PUBLIC_URL}}</p>\\n        </div>\\n        <div *ngIf=\\\"firstCensusInfo.CENSUS_PUBLIC_TYPE===0\\\">\\n          <p class=\\\"down-line\\\" *ngFor=\\\"let item of historyEvilFileArr\\\" size=\\\"small\\\" color=\\\"tertiary\\\" (click)=\\\"downFile(item)\\\">\\n          {{item.FILENAME}}</p>\\n        </div>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n  \\n  <div *ngIf=\\\"!dataFlag\\\" class=\\\"nodata\\\">暂无数据，请稍后再试！</div>\\n</ion-content>\"","module.exports = \"ion-content {\\n  --padding-start:10px;\\n  --padding-end:10px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcGxvdC1wcmltYXJ5LXJlc2VhcmNoL0U6XFx3b3JrXFxwcm9qZWN0c1xcYmVpamluZ19zb2lsX2FwcDIwMTkwNTA1XFxCSldSQVBQL3NyY1xcYXBwXFxwYWdlc1xccGxvdC1wcmltYXJ5LXJlc2VhcmNoXFxwbG90LXByaW1hcnktcmVzZWFyY2gucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBO0VBQ0ksb0JBQWdCO0VBQ2hCLGtCQUFjLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9wbG90LXByaW1hcnktcmVzZWFyY2gvcGxvdC1wcmltYXJ5LXJlc2VhcmNoLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5pb24tY29udGVudHtcclxuICAgIC0tcGFkZGluZy1zdGFydDoxMHB4O1xyXG4gICAgLS1wYWRkaW5nLWVuZDoxMHB4O1xyXG59XHJcblxyXG4iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { InAppBrowser } from '@ionic-native/in-app-browser/ngx';\nimport { ConfigService } from '../../services/public/config.service';\nimport { GlobalService } from '../../services/public/global.service';\nimport { AppUpdateService } from '../../services/public/app-update.service';\nimport { HttpUtilsService } from '../../services/public/http-utils.service';\n\n\n\n@Component({\n  selector: 'app-plot-primary-research',\n  templateUrl: './plot-primary-research.page.html',\n  styleUrls: ['./plot-primary-research.page.scss'],\n})\nexport class PlotPrimaryResearchPage implements OnInit {\n  firstCensusInfo: any = {}; //初步调查数据\n  dataFlag: any = false;  //是否拿到初步调查数据\n  data: object = {};\n  censusFileArr: any = []; // 调查附件列表\n  surveyFileArr: any = []; // 检测附件列表\n  evidenceFileArr: any = []; // 证明材料列表\n  historyEvilFileArr: any = []; // 历史项目列表\n  skinName: string; //皮肤名称\n  constructor(\n    public iab: InAppBrowser,\n    public global: GlobalService,\n    public configService: ConfigService,\n    public appUpdate: AppUpdateService,\n    public httpUtils: HttpUtilsService,\n  ) {\n\n  }\n\n  ngOnInit() {\n    //初始化页面数据\n    this.init();\n    //获取所有的附件的数组\n    this.getAllFileArr();\n  }\n\n\n  ionViewWillEnter() {\n    //设置头部皮肤\n    this.skinName = localStorage.getItem('skinName') || 'blue';\n  }\n\n  /**\n   * 打开本地浏览器跳转对应网址\n   * @param url 网址\n   */\n  openBrower(url) {\n    if (url) {\n      const browser = this.iab.create(url, '_system');\n      browser.show();\n    }\n  }\n\n  //初始化页面数据\n  init() {\n    this.data = this.global.plotDetailData;\n    if (JSON.stringify(this.data) !== \"{}\") {\n      this.firstCensusInfo = this.data['firstCensusInfo'];\n      if (JSON.stringify(this.firstCensusInfo) !== \"{}\") {\n        this.dataFlag = true;\n      } else {\n        this.dataFlag = false;\n      }\n    }\n  }\n\n  /**\n   * 获取所有的附件的数组\n   * @param flag? boolean  默认为true ,表示是否显示loading 遮罩\n   */\n  getAllFileArr(flag = true) {\n\n    //let CENSUS = '58625234-0b18-4e39-9bef-c4515beb9617,a212f803-1af8-45d1-a0d6-a7cf669b85a6';\n    //获取检查调查报告数组\n    this.configService.getFile({ 'ids': this.firstCensusInfo.CENSUS, 'sessionId': this.global.sessionId }, flag, res => {\n      //console.log(res);\n      if (res !== 'error') {\n        this.censusFileArr = res;\n      }\n    });\n\n    //获取检查报告数组\n    this.configService.getFile({ 'ids': this.firstCensusInfo.SURVEY_REPORT, 'sessionId': this.global.sessionId }, flag, res => {\n      // console.log(res);\n      if (res !== 'error') {\n        this.surveyFileArr = res;\n      }\n    });\n\n    //获取证明材料数组\n    this.configService.getFile({ 'ids': this.firstCensusInfo.EVIDENCE_FILE, 'sessionId': this.global.sessionId }, flag, res => {\n      // console.log(res);\n      if (res !== 'error') {\n        this.evidenceFileArr = res;\n      }\n    });\n\n    //如果公示网址对应 无新增项目\n    if (this.firstCensusInfo.CENSUS_PUBLIC_TYPE === 0) {\n      //获取历史记录证明材料数组\n      this.configService.getFile({ 'ids': this.firstCensusInfo.CENSUS_PUBLIC_FILES, 'sessionId': this.global.sessionId }, flag, res => {\n        // console.log(res);\n        if (res !== 'error') {\n          this.historyEvilFileArr = res;\n        }\n      });\n    }\n  }\n\n\n  /**\n   *下载资料\n   * @param item 对象\n   */\n  downFile(item) {\n    if (item.FILENAME) {\n      //获取后缀名\n      let fileSuffix = this.appUpdate.getFileSuffix(item.FILENAME);\n      let downUrl = `${this.global.hostUrl}${this.global.downUrl}?fileid=${item.FILEID}&sessionId=${this.global.sessionId}`;\n      this.appUpdate.downFile(downUrl, fileSuffix, item.FILENAME, item.FILESIZE);\n    } else {\n      this.httpUtils.thsToast('附件暂时无法下载！');\n    }\n  }\n\n  /**\n   *下拉刷新事件\n   * @param event 事件\n   */\n  doRefresh(event) {\n    //初始化页面数据\n    this.init();\n    //获取所有的附件的数组\n    this.getAllFileArr(false);\n    setTimeout(() => {\n      event.target.complete();\n    }, 1000);\n  }\n}\n"],"sourceRoot":""}